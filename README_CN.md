# LazyMount-Mac ğŸš€

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Platform](https://img.shields.io/badge/platform-macOS-blue.svg)](https://www.apple.com/macos/)

**[ğŸ“– English Documentation](README.md)**

> **è½»æ¾æ‰©å±• Mac å­˜å‚¨ç©ºé—´** â€” å¼€æœºè‡ªåŠ¨æŒ‚è½½ SMB å…±äº«å’Œäº‘å­˜å‚¨ï¼Œå…¨ç¨‹æ— éœ€æ‰‹åŠ¨æ“ä½œã€‚

---

## âœ¨ ä¸ºä»€ä¹ˆé€‰æ‹© LazyMountï¼Ÿ

Mac å­˜å‚¨ç©ºé—´**å¤ªè´µäº†** â€” å‡çº§ 1TB è¦å¤šèŠ± Â¥1500+ã€‚LazyMount å¸®ä½ ç”¨å¤–éƒ¨å­˜å‚¨æ— ç¼æ‰©å±• Macï¼š

- ğŸ® **æ¸¸æˆåº“** â€” æŠŠ Steam/Epic æ¸¸æˆæ”¾åœ¨ NAS ä¸Šï¼Œç©èµ·æ¥è·Ÿæœ¬åœ°ä¸€æ ·
- ğŸ’¾ **æ—¶é—´æœºå™¨å¤‡ä»½** â€” è‡ªåŠ¨å¤‡ä»½åˆ°è¿œç¨‹æœåŠ¡å™¨
- ğŸ¬ **åª’ä½“åº“** â€” éšæ—¶è®¿é—®å­˜æ”¾åœ¨å®¶åº­æœåŠ¡å™¨ä¸Šçš„ç”µå½±/éŸ³ä¹
- ğŸ“ **é¡¹ç›®å½’æ¡£** â€” å¤§æ–‡ä»¶æ”¾åœ¨ä¾¿å®œçš„å­˜å‚¨ä¸Šï¼ŒæŒ‰éœ€è®¿é—®
- â˜ï¸ **äº‘å­˜å‚¨** â€” æŠŠ Google Driveã€Dropbox æˆ–ä»»ä½• rclone æ”¯æŒçš„æœåŠ¡æŒ‚è½½æˆæœ¬åœ°æ–‡ä»¶å¤¹

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- ğŸ”„ **å¼€æœºè‡ªåŠ¨æŒ‚è½½** â€” ä¸ç”¨æ‰‹åŠ¨ç‚¹å‡»
- ğŸ›¡ï¸ **è‡ªåŠ¨æ¢å¤** â€” æ–­ç½‘åè‡ªåŠ¨é‡è¿
- ğŸŒ **éšå¤„å¯ç”¨** â€” é€šè¿‡ Tailscale è¿œç¨‹è®¿é—®å®¶é‡Œçš„å­˜å‚¨
- âš¡ **åŒæ¨¡å¼** â€” åŒæ—¶æ”¯æŒ SMBï¼ˆå±€åŸŸç½‘ï¼‰å’Œ Rcloneï¼ˆäº‘å­˜å‚¨/è¿œç¨‹ï¼‰

---

## ğŸ“¦ å®‰è£…

### å‰ç½®è¦æ±‚

1. **Rclone**ï¼ˆç”¨äºäº‘å­˜å‚¨æŒ‚è½½ï¼‰ï¼š
   ```bash
   brew install rclone
   # ç„¶åé…ç½®ä½ çš„è¿œç¨‹å­˜å‚¨ï¼š
   rclone config
   ```

2. **macFUSE**ï¼ˆRclone ä¾èµ–ï¼‰ï¼š
   ```bash
   brew install --cask macfuse
   ```

3. **ï¼ˆæ¨èï¼‰Tailscale** â€” ç”¨äºè¿œç¨‹è®¿é—®å®¶åº­ç½‘ç»œï¼š
   ```bash
   brew install --cask tailscale
   ```

### å¿«é€Ÿå¼€å§‹

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/yuanweize/LazyMount-Mac.git
cd LazyMount-Mac

# 2. å¤åˆ¶è„šæœ¬åˆ° Scripts æ–‡ä»¶å¤¹
mkdir -p ~/Scripts
cp mount_manager.sh ~/Scripts/
chmod +x ~/Scripts/mount_manager.sh

# 3. ç¼–è¾‘è„šæœ¬ï¼Œå¡«å…¥ä½ çš„é…ç½®
nano ~/Scripts/mount_manager.sh  # æˆ–ç”¨ä»»ä½•ç¼–è¾‘å™¨

# 4. å®‰è£… LaunchAgent å®ç°å¼€æœºè‡ªå¯
cp com.example.mountmanager.plist ~/Library/LaunchAgents/com.lazymount.plist
# æŠŠ YOUR_USERNAME æ›¿æ¢æˆä½ çš„ç”¨æˆ·åï¼š
sed -i '' "s/YOUR_USERNAME/$(whoami)/g" ~/Library/LaunchAgents/com.lazymount.plist

# 5. åŠ è½½å®ƒï¼
launchctl load ~/Library/LaunchAgents/com.lazymount.plist
```

---

## âš™ï¸ é…ç½®è¯´æ˜

ç¼–è¾‘ `~/Scripts/mount_manager.sh`ï¼Œä¿®æ”¹ **USER CONFIGURATION** éƒ¨åˆ†ï¼š

### SMB å…±äº«é…ç½®

```bash
SMB_ENABLED="true"
SMB_IP="192.168.1.100"           # ä½ çš„ NAS/æœåŠ¡å™¨ IP
SMB_USER="your_username"         # SMB ç”¨æˆ·å
SMB_SHARE="SharedFolder"         # å…±äº«æ–‡ä»¶å¤¹åç§°
```

### Rclone é…ç½®

```bash
RCLONE_ENABLED="true"
RCLONE_REMOTE="myremote:/path"   # ä½ çš„ rclone è¿œç¨‹å­˜å‚¨
RCLONE_MOUNT_POINT="$HOME/Mounts/Cloud"
RCLONE_IP="100.x.x.x"            # ç”¨äºç½‘ç»œæ£€æµ‹çš„ IPï¼ˆè¿œç¨‹è®¿é—®æ—¶ç”¨ Tailscale IPï¼‰
```

### ç¨€ç–ç£ç›˜æ˜ åƒï¼ˆå¯é€‰ï¼‰

ç”¨äºæŒ‚è½½å­˜æ”¾åœ¨ SMB å…±äº«ä¸Šçš„ç£ç›˜æ˜ åƒï¼š

```bash
BUNDLE_PATH="$SMB_MOUNT_POINT/Storage.sparsebundle"
BUNDLE_VOLUME_NAME="ExternalStorage"
```

---

## ğŸŒ ä½¿ç”¨ Tailscale è¿œç¨‹è®¿é—®

LazyMount å®Œç¾é…åˆ [Tailscale](https://tailscale.com/)ï¼Œè®©ä½ åœ¨ä»»ä½•åœ°æ–¹éƒ½èƒ½è®¿é—®å®¶é‡Œçš„å­˜å‚¨ã€‚

### æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ä½ çš„å®¶åº­ç½‘ç»œ                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   NAS     â”‚     â”‚   æœåŠ¡å™¨   â”‚     â”‚  Tailscale èŠ‚ç‚¹   â”‚  â”‚
â”‚  â”‚ 192.168.  â”‚â”€â”€â”€â”€â–¶â”‚ (Rclone)  â”‚â”€â”€â”€â”€â–¶â”‚  (å­ç½‘è·¯ç”±å™¨)     â”‚  â”‚
â”‚  â”‚   1.100   â”‚     â”‚           â”‚     â”‚  100.x.x.x        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                    â”€â”€â”€â”€ Tailscale VPN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¸–ç•Œä»»ä½•è§’è½                â”‚           â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                         â”‚        ä½ çš„ MacBook             â”‚ â”‚
â”‚                         â”‚    LazyMount è‡ªåŠ¨è¿æ¥ï¼         â”‚ â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å­ç½‘è·¯ç”±é…ç½®ï¼ˆå†…ç½‘ç©¿é€ï¼‰

ä½ éœ€è¦çš„åŠŸèƒ½å«åš Tailscale çš„ **"å­ç½‘è·¯ç”±å™¨ (Subnet Router)"**ï¼š

1. **åœ¨å®¶é‡Œçš„æœåŠ¡å™¨ä¸Š**ï¼ˆLinux ç¤ºä¾‹ï¼‰ï¼š
   ```bash
   # å¼€å¯ IP è½¬å‘
   echo 'net.ipv4.ip_forward = 1' | sudo tee -a /etc/sysctl.conf
   sudo sysctl -p
   
   # å¹¿æ’­ä½ çš„å®¶åº­å­ç½‘
   sudo tailscale up --advertise-routes=192.168.1.0/24
   ```

2. **åœ¨ Tailscale ç®¡ç†åå°** (https://login.tailscale.com/admin)ï¼š
   - è½¬åˆ° Machines â†’ ä½ çš„æœåŠ¡å™¨ â†’ å¯ç”¨ "Subnet routes"
   - æ‰¹å‡† `192.168.1.0/24` è·¯ç”±

3. **åœ¨ä½ çš„ Mac ä¸Š**ï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼š
   ```bash
   # æ¥å—å¹¿æ’­çš„è·¯ç”±
   sudo tailscale up --accept-routes
   ```

ç°åœ¨ä½ åœ¨å’–å•¡åº—ä¹Ÿèƒ½è®¿é—® `192.168.1.x` åœ°å€äº†ï¼ğŸ‰

---

## ğŸ® ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### 1. NAS ä¸Šçš„ Steam æ¸¸æˆåº“

æŠŠæ¸¸æˆå­˜åˆ° NAS ä¸Šï¼ŒèŠ‚çœ SSD ç©ºé—´ï¼š

```bash
# åœ¨ mount_manager.sh ä¸­é…ç½®ï¼š
SMB_IP="192.168.1.50"        # NAS IP
SMB_USER="steam"             
SMB_SHARE="Games"            # åŒ…å« Steam åº“çš„å…±äº«

# å¯é€‰ï¼šä½¿ç”¨ç¨€ç–ç£ç›˜æ˜ åƒæå‡æ€§èƒ½
BUNDLE_PATH="/Volumes/Games/SteamLibrary.sparsebundle"
BUNDLE_VOLUME_NAME="SteamLibrary"
```

ç„¶ååœ¨ Steam ä¸­ï¼šè®¾ç½® â†’ å­˜å‚¨ â†’ æ·»åŠ åº“æ–‡ä»¶å¤¹ â†’ `/Volumes/SteamLibrary`

### 2. æ—¶é—´æœºå™¨å¤‡ä»½åˆ°è¿œç¨‹æœåŠ¡å™¨

æŠŠ Mac å¤‡ä»½åˆ°ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼š

```bash
SMB_IP="192.168.1.10"
SMB_USER="timemachine"
SMB_SHARE="Backups"

BUNDLE_PATH="/Volumes/Backups/MyMac.sparsebundle"
BUNDLE_VOLUME_NAME="TimeMachine"
```

ç„¶åï¼šç³»ç»Ÿè®¾ç½® â†’ æ—¶é—´æœºå™¨ â†’ é€‰æ‹©ç£ç›˜ â†’ é€‰æ‹© "TimeMachine"

### 3. åª’ä½“æœåŠ¡å™¨ï¼ˆPlex/Jellyfin ç‰‡æºï¼‰

è®¿é—®å­˜æ”¾åœ¨å®¶åº­æœåŠ¡å™¨ä¸Šçš„ç”µå½±åº“ï¼š

```bash
RCLONE_ENABLED="true"
RCLONE_REMOTE="homeserver:/media"
RCLONE_MOUNT_POINT="$HOME/Movies/Server"
RCLONE_IP="100.64.0.1"       # æœåŠ¡å™¨çš„ Tailscale IP
```

### 4. Google Drive / Dropbox å½“æœ¬åœ°æ–‡ä»¶å¤¹

æŠŠäº‘å­˜å‚¨æŒ‚è½½æˆæœ¬åœ°ç£ç›˜ï¼š

```bash
# é¦–å…ˆé…ç½® rcloneï¼š
# rclone config â†’ New remote â†’ "google" â†’ Google Drive

RCLONE_REMOTE="google:/MyDrive"
RCLONE_MOUNT_POINT="$HOME/GoogleDrive"
RCLONE_IP="8.8.8.8"          # ç”¨ Google DNS æ£€æµ‹ç½‘ç»œ
```

### 5. å…¬å¸é¡¹ç›®å½’æ¡£

å¤§å‹é¡¹ç›®æ–‡ä»¶æ”¾åœ¨å…¬å¸ NASï¼Œåœ¨å®¶ä¹Ÿèƒ½è®¿é—®ï¼š

```bash
SMB_ENABLED="true"
SMB_IP="10.0.0.50"           # å…¬å¸ NASï¼ˆé€šè¿‡ VPN/Tailscaleï¼‰
SMB_USER="employee"
SMB_SHARE="Projects"
```

### 6. ğŸ§  AI/å¤§æ¨¡å‹å­˜å‚¨åº“ (Ollama, LM Studio ç­‰)

æŠŠå¤§è¯­è¨€æ¨¡å‹ (LLaMA, Mistral, Qwen ç­‰) å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼Œè€Œä¸æ˜¯å ç”¨ Mac æœ‰é™çš„ SSD ç©ºé—´ï¼š

```bash
RCLONE_ENABLED="true"
RCLONE_REMOTE="homeserver:/ai-models"
RCLONE_MOUNT_POINT="$HOME/.ollama/models"    # Ollama çš„æ¨¡å‹ç›®å½•
RCLONE_IP="192.168.1.10"
```

**âš ï¸ é‡è¦ï¼šç½‘ç»œé€Ÿåº¦éå¸¸å…³é”®ï¼**

å¤§æ¨¡å‹åœ¨æ¨ç†å‰å¿…é¡»å…ˆåŠ è½½åˆ°å†…å­˜ã€‚å¦‚æœæ¨¡å‹ä¸åœ¨æœ¬åœ°ç¼“å­˜ï¼Œå°±è¦ä»ç½‘ç»œä¼ è¾“ã€‚ä¸€ä¸ª 70B æ¨¡å‹å¯èƒ½æœ‰ 40GB+ï¼Œæ‰€ä»¥ç½‘é€Ÿå¾ˆé‡è¦ï¼š

| ç½‘ç»œç±»å‹ | é€Ÿåº¦ | åŠ è½½ 40GB æ¨¡å‹è€—æ—¶ |
|----------|------|-------------------|
| åƒå…†ç½‘ (1G) | ~120 MB/s | ~5.5 åˆ†é’Ÿ |
| **2.5G ç½‘å£** | ~300 MB/s | **~2.2 åˆ†é’Ÿ** âœ… æ¨è |
| ä¸‡å…†ç½‘ (10G) | ~1.2 GB/s | ~33 ç§’ |

**ç¡¬ä»¶å‡çº§å»ºè®®ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¡ æƒ³è·å¾—æœ€ä½³å¤§æ¨¡å‹ä½“éªŒï¼Ÿå‡çº§ä½ çš„ç½‘ç»œï¼                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  æ–¹æ¡ˆä¸€ï¼š2.5G USB ç½‘å¡ï¼ˆçº¦ Â¥50-100ï¼‰                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Mac   â”‚â”€USBâ”€â–¶â”‚ 2.5G USB ç½‘å¡  â”‚â”€â”€â”€â”€â”€â–¶â”‚ 2.5G äº¤æ¢æœº â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚  æ–¹æ¡ˆäºŒï¼š10G é›·ç”µè½¬æ¢å™¨ï¼ˆçº¦ Â¥500-1000ï¼‰                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Mac   â”‚â”€TB4â”€â–¶â”‚ 10G é›·ç”µè½¬æ¢å™¨ â”‚â”€â”€â”€â”€â”€â–¶â”‚ 10G äº¤æ¢æœº  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ æ³¨æ„ï¼šä¸¤ç«¯ï¼ˆMac + æœåŠ¡å™¨ï¼‰éƒ½è¦æ”¯æŒå¯¹åº”çš„é€Ÿåº¦ï¼              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¤§æ¨¡å‹ä¸“ç”¨ç¼“å­˜è®¾ç½®ï¼ˆå‡å°‘é‡å¤ä¸‹è½½ï¼‰ï¼š**

```bash
# åœ¨ mount_manager.sh ä¸­è°ƒæ•´ Rclone è®¾ç½®ï¼š
--vfs-cache-max-size 100G    # å¤§ç¼“å­˜å­˜æ”¾æ¨¡å‹æ–‡ä»¶
--vfs-cache-max-age 720h     # ç¼“å­˜ä¿ç•™ 30 å¤©
--vfs-read-ahead 1G          # é¢„è¯»å–åŠ å¿«åŠ è½½
```

**ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ï¼š**
- å¤§æ¨¡å‹åº”ç”¨ (Ollama, LM Studio) é—²ç½®å‡ åˆ†é’Ÿåä¼šè‡ªåŠ¨å¸è½½æ¨¡å‹ï¼ˆé€šå¸¸æ˜¯ 5 åˆ†é’Ÿï¼‰
- ä¸‹æ¬¡å¯¹è¯éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªæ¨¡å‹
- å¿«ç½‘ç»œ = å¿«é€ŸåŠ è½½æ¨¡å‹ = æ›´å¥½çš„ä½¿ç”¨ä½“éªŒ

---

## ğŸ“š æ–°æ‰‹è¯¦ç»†æ•™ç¨‹

ç¬¬ä¸€æ¬¡ç”¨ç»ˆç«¯/å‘½ä»¤è¡Œï¼Ÿè¿™ä¸ªéƒ¨åˆ†æ‰‹æŠŠæ‰‹æ•™ä½ æ¯ä¸€æ­¥ã€‚

### ç¬¬ 1 æ­¥ï¼šå®‰è£… Homebrewï¼ˆåŒ…ç®¡ç†å™¨ï¼‰

Homebrew å°±åƒå‘½ä»¤è¡Œå·¥å…·çš„ "App Store"ã€‚å¦‚æœä½ è¿˜æ²¡è£…ï¼š

```bash
# æ‰“å¼€ç»ˆç«¯ï¼ˆèšç„¦æœç´¢ â†’ è¾“å…¥ "ç»ˆç«¯" â†’ å›è½¦ï¼‰
# ç²˜è´´è¿™ä¸ªå‘½ä»¤ç„¶åå›è½¦ï¼š
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# æŒ‰ç…§å±å¹•ä¸Šçš„æç¤ºæ“ä½œ
# å®ŒæˆåéªŒè¯ä¸€ä¸‹ï¼š
brew --version
```

### ç¬¬ 2 æ­¥ï¼šå®‰è£…å¿…è¦çš„å·¥å…·

```bash
# å®‰è£… Rcloneï¼ˆç”¨äºäº‘/è¿œç¨‹æŒ‚è½½ï¼‰
brew install rclone

# å®‰è£… macFUSEï¼ˆRclone ä¾èµ–è¿™ä¸ªï¼‰
# âš ï¸ å®‰è£…åéœ€è¦é‡å¯ï¼
brew install --cask macfuse

# ï¼ˆå¯é€‰ï¼‰å®‰è£… Tailscale ç”¨äºè¿œç¨‹è®¿é—®
brew install --cask tailscale
```

**å®‰è£… macFUSE åï¼š**
1. æ‰“å¼€ç³»ç»Ÿè®¾ç½® â†’ éšç§ä¸å®‰å…¨æ€§
2. å¾€ä¸‹æ»‘ï¼Œç‚¹å‡»å…è®¸ macFUSE æ‰©å±•
3. **é‡å¯ Mac**

### ç¬¬ 3 æ­¥ï¼šé…ç½® Rclone è¿œç¨‹å­˜å‚¨

```bash
# å¯åŠ¨é…ç½®å‘å¯¼
rclone config

# ä¾‹å¦‚ï¼šè®¾ç½® SFTP è¿æ¥åˆ°ä½ çš„æœåŠ¡å™¨
# n) New remoteï¼ˆæ–°å»ºè¿œç¨‹ï¼‰
# name> homeserver
# Storage> sftp
# host> 192.168.1.10
# user> your_username
# ï¼ˆæŒ‰æç¤ºè¾“å…¥ SSH å¯†é’¥æˆ–å¯†ç ï¼‰
```

**å¸¸è§è¿œç¨‹ç±»å‹ï¼š**

| ç±»å‹ | ç”¨é€” | é…ç½®å‘½ä»¤ |
|------|------|----------|
| SFTP | Linux æœåŠ¡å™¨ã€å¸¦ SSH çš„ NAS | `rclone config` â†’ sftp |
| Google Drive | Google äº‘ç›˜ | `rclone config` â†’ drive |
| Dropbox | Dropbox æ–‡ä»¶ | `rclone config` â†’ dropbox |
| S3 | AWS/MinIO å­˜å‚¨ | `rclone config` â†’ s3 |

### ç¬¬ 4 æ­¥ï¼šæµ‹è¯•ä½ çš„è¿œç¨‹å­˜å‚¨

```bash
# åˆ—å‡ºè¿œç¨‹å­˜å‚¨ä¸Šçš„æ–‡ä»¶ï¼ˆæŠŠ 'homeserver' æ¢æˆä½ çš„è¿œç¨‹åï¼‰
rclone ls homeserver:/

# å¦‚æœèƒ½çœ‹åˆ°æ–‡ä»¶ï¼Œè¯´æ˜é…ç½®æˆåŠŸï¼
```

### ç¬¬ 5 æ­¥ï¼šä¸‹è½½å¹¶é…ç½® LazyMount

```bash
# åˆ›å»º Scripts æ–‡ä»¶å¤¹
mkdir -p ~/Scripts

# ä¸‹è½½è„šæœ¬
curl -o ~/Scripts/mount_manager.sh https://raw.githubusercontent.com/yuanweize/LazyMount-Mac/main/mount_manager.sh

# è®¾ç½®å¯æ‰§è¡Œæƒé™
chmod +x ~/Scripts/mount_manager.sh

# ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ç¼–è¾‘
open -e ~/Scripts/mount_manager.sh
```

**åœ¨è„šæœ¬ä¸­æ‰¾åˆ°å¹¶ä¿®æ”¹è¿™äº›è¡Œï¼š**

```bash
# === RCLONE é…ç½® ===
RCLONE_ENABLED="true"                          # å¯ç”¨ Rcloneï¼Ÿ(true/false)
RCLONE_REMOTE="homeserver:/data"               # â† ä½ çš„è¿œç¨‹åå’Œè·¯å¾„
RCLONE_MOUNT_POINT="$HOME/Mounts/Server"       # â† Mac ä¸Šçš„æŒ‚è½½ä½ç½®
RCLONE_IP="192.168.1.10"                       # â† ç”¨äºç½‘ç»œæ£€æµ‹çš„ IP

# === SMB é…ç½® ===
SMB_ENABLED="true"                             # å¯ç”¨ SMBï¼Ÿ(true/false)
SMB_IP="192.168.1.100"                         # â† ä½ çš„ NAS/æœåŠ¡å™¨ IP
SMB_USER="your_username"                       # â† ä½ çš„ SMB ç”¨æˆ·å
SMB_SHARE="SharedFolder"                       # â† å…±äº«æ–‡ä»¶å¤¹å
```

### ç¬¬ 6 æ­¥ï¼šæŠŠ SMB å¯†ç ä¿å­˜åˆ°é’¥åŒ™ä¸²

**è¿™æ­¥å¾ˆé‡è¦ï¼** è„šæœ¬éœ€è¦é’¥åŒ™ä¸²é‡Œå­˜æœ‰å¯†ç ï¼š

1. æ‰“å¼€ **Finder** â†’ æŒ‰ `âŒ˜ + K`ï¼ˆè¿æ¥æœåŠ¡å™¨ï¼‰
2. è¾“å…¥ï¼š`smb://ä½ çš„ç”¨æˆ·å@192.168.1.100/å…±äº«æ–‡ä»¶å¤¹`
3. è¾“å…¥å¯†ç 
4. âœ… å‹¾é€‰ **"åœ¨æˆ‘çš„é’¥åŒ™ä¸²ä¸­è®°ä½æ­¤å¯†ç "**
5. ç‚¹å‡»è¿æ¥

è¿™æ ·è„šæœ¬å°±èƒ½è‡ªåŠ¨è¿æ¥ï¼Œä¸ç”¨æ¯æ¬¡è¾“å¯†ç ï¼

### ç¬¬ 7 æ­¥ï¼šæ‰‹åŠ¨æµ‹è¯•è„šæœ¬

```bash
# è¿è¡Œè„šæœ¬çœ‹çœ‹èƒ½ä¸èƒ½ç”¨
~/Scripts/mount_manager.sh

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯çª—å£å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f /tmp/mount_manager.log

# ä½ åº”è¯¥èƒ½çœ‹åˆ°ï¼š
# === Mount Session Started: ... ===
# HH:MM:SS [SMB] Starting sequence...
# HH:MM:SS [SMB] Network OK.
# ...
```

### ç¬¬ 8 æ­¥ï¼šè®¾ç½®å¼€æœºè‡ªå¯

```bash
# ä¸‹è½½ LaunchAgent é…ç½®æ–‡ä»¶
curl -o ~/Library/LaunchAgents/com.lazymount.plist https://raw.githubusercontent.com/yuanweize/LazyMount-Mac/main/com.example.mountmanager.plist

# æŠŠ YOUR_USERNAME æ›¿æ¢æˆä½ çš„ç”¨æˆ·å
sed -i '' "s/YOUR_USERNAME/$(whoami)/g" ~/Library/LaunchAgents/com.lazymount.plist

# åŠ è½½å®ƒï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰
launchctl load ~/Library/LaunchAgents/com.lazymount.plist

# éªŒè¯æ˜¯å¦æ­£åœ¨è¿è¡Œ
launchctl list | grep lazymount
```

### ç¬¬ 9 æ­¥ï¼šéªŒè¯ä¸€åˆ‡æ­£å¸¸

```bash
# æ£€æŸ¥å·æ˜¯å¦å·²æŒ‚è½½ï¼š

# SMBï¼š
ls /Volumes/

# Rcloneï¼š
ls ~/Mounts/

# æŸ¥çœ‹æœ€è¿‘çš„æ—¥å¿—ï¼š
tail -20 /tmp/mount_manager.log
```

**ğŸ‰ æå®šï¼** ä½ çš„å­˜å‚¨ç©ºé—´ç°åœ¨æ¯æ¬¡ç™»å½•éƒ½ä¼šè‡ªåŠ¨æŒ‚è½½ã€‚

---

## ğŸ”§ ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹çŠ¶æ€
launchctl list | grep lazymount

# æŸ¥çœ‹æ—¥å¿—
tail -f /tmp/mount_manager.log

# é‡å¯æœåŠ¡
launchctl unload ~/Library/LaunchAgents/com.lazymount.plist
launchctl load ~/Library/LaunchAgents/com.lazymount.plist

# åœæ­¢æœåŠ¡
launchctl unload ~/Library/LaunchAgents/com.lazymount.plist

# æ‰‹åŠ¨è¿è¡Œï¼ˆç”¨äºæµ‹è¯•ï¼‰
~/Scripts/mount_manager.sh
```

---

## â“ å¸¸è§é—®é¢˜

### Q: æŒ‚è½½å¤±è´¥ï¼Œæç¤º "permission denied"
**A:** ç¡®ä¿ SMB å‡­è¯å·²ä¿å­˜åˆ°é’¥åŒ™ä¸²ï¼š
1. æ‰“å¼€ Finder â†’ å‰å¾€ â†’ è¿æ¥æœåŠ¡å™¨ï¼ˆâŒ˜Kï¼‰
2. è¾“å…¥ SMB åœ°å€ï¼š`smb://ç”¨æˆ·å@æœåŠ¡å™¨/å…±äº«`
3. å‹¾é€‰"åœ¨æˆ‘çš„é’¥åŒ™ä¸²ä¸­è®°ä½æ­¤å¯†ç "

### Q: Rclone æŒ‚è½½å¾ˆæ…¢
**A:** è°ƒæ•´è„šæœ¬ä¸­çš„ç¼“å­˜è®¾ç½®ï¼š
```bash
--vfs-cache-max-size 50G    # å¢å¤§ç¼“å­˜
--dir-cache-time 5m         # å»¶é•¿ç›®å½•ç¼“å­˜æ—¶é—´
```

### Q: æ–‡ä»¶ä¸ä¼šç«‹å³æ˜¾ç¤º
**A:** è¿™æ˜¯ Rclone çš„æ­£å¸¸ç°è±¡ã€‚æŠŠ `--dir-cache-time` æ”¹æˆ `10s` å¯ä»¥åŠ å¿«åˆ·æ–°ã€‚

### Q: æ€ä¹ˆæ‰‹åŠ¨å¸è½½ï¼Ÿ
```bash
# SMB
diskutil unmount /Volumes/ä½ çš„å…±äº«

# Rclone
diskutil unmount force ~/Mounts/CloudStorage
```

---

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE)ã€‚

---

## ğŸ”— å‹æƒ…é“¾æ¥

- [AppPorts](https://github.com/wzh4869/AppPorts)

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Pull Requestï¼

---

**ä¸ºæ‹’ç»æ”¯ä»˜è‹¹æœå­˜å‚¨ç¨çš„ Mac ç”¨æˆ·è€Œåš â¤ï¸**
